"use strict";(self.webpackChunkPF_angular_guisasola=self.webpackChunkPF_angular_guisasola||[]).push([[713],{5937:(Z,f,e)=>{e.d(f,{L:()=>x});var o=e(6223),i=e(7700),u=e(1630),h=e(9591),r=e(8571),t=e(5879),a=e(4221),m=e(5154),C=e(6814),v=e(2296),D=e(5683),P=e(8525),O=e(3680),U=e(9638);function p(g,y){if(1&g&&(t.TgZ(0,"mat-option",9),t._uU(1),t.ALo(2,"fullname"),t.qZA()),2&g){const d=y.$implicit;t.Q6J("value",d.id),t.xp6(1),t.hij(" ",t.xi3(2,2,d.name,d.surname)," ")}}function I(g,y){if(1&g&&(t.TgZ(0,"mat-option",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&g){const d=y.$implicit;t.Q6J("value",d.id),t.xp6(1),t.AsE(" ",null==d.name?null:d.name.nameString," - ( ",t.xi3(2,3,d.startDate,"yyyy/MM/dd")," ) ")}}let x=(()=>{class g{constructor(d,T,_,M,S){this.formBuilder=d,this.store=T,this.actions$=_,this.dialogRef=M,this.data=S,this.source="",this.store.dispatch(h.c.loadEnrollmentDialogOptions()),this.courses$=this.store.select(r.U8),this.students$=this.store.select(r.qc),this.enrollmentForm=this.formBuilder.group({studentId:["",[o.kI.required]],courseId:["",[o.kI.required]]}),this.data?.student&&(this.studentIdControl.setValue(this.data.student.id),this.studentIdControl.disable(),this.source="student"),this.data?.course&&(this.courseIdControl.setValue(this.data.course.id),this.courseIdControl.disable(),this.source="course")}onSubmit(){const d=this.enrollmentForm.get("studentId")?.value,T=this.enrollmentForm.get("courseId")?.value;let M={id:(0,u.x0)(5),studentId:d,courseId:T};this.store.dispatch(h.c.createEnrollment({payload:M,source:this.source})),this.dialogRef.close()}get studentIdControl(){return this.enrollmentForm.controls.studentId}get courseIdControl(){return this.enrollmentForm.controls.courseId}get studentIdControlError(){return this.studentIdControl.hasError("required")?"Student is required":""}get courseIdControlError(){return this.courseIdControl.hasError("required")?"Course is required":""}static#t=this.\u0275fac=function(T){return new(T||g)(t.Y36(o.qu),t.Y36(a.yh),t.Y36(m.eX),t.Y36(i.so),t.Y36(i.WI))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-enrollment-dialog"]],decls:25,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"example-form"],[1,"col-12"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-stroked-button","","mat-dialog-close",""],["mat-flat-button","","color","accent",3,"disabled","click"],[3,"value"]],template:function(T,_){1&T&&(t.TgZ(0,"p",0),t._uU(1," New enrollment\n"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Student"),t.qZA(),t.TgZ(7,"mat-select",4),t.YNc(8,p,3,5,"mat-option",5),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"mat-error"),t._uU(11),t.qZA()(),t.TgZ(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Course"),t.qZA(),t.TgZ(15,"mat-select",4),t.YNc(16,I,3,6,"mat-option",5),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"mat-error"),t._uU(19),t.qZA()()()(),t.TgZ(20,"mat-dialog-actions",6)(21,"button",7),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"button",8),t.NdJ("click",function(){return _.onSubmit()}),t._uU(24," Confirm "),t.qZA()()),2&T&&(t.xp6(7),t.Q6J("formControl",_.studentIdControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,7,_.students$)),t.xp6(3),t.hij(" ",_.studentIdControlError," "),t.xp6(4),t.Q6J("formControl",_.courseIdControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(17,9,_.courses$)),t.xp6(3),t.hij(" ",_.courseIdControlError," "),t.xp6(4),t.Q6J("disabled",!_.enrollmentForm.valid))},dependencies:[C.sg,v.lW,o._Y,o.JJ,o.JL,o.oH,D.KE,D.hX,D.TO,i.ZT,i.uh,i.xY,i.H8,P.gD,O.ey,C.Ov,C.uU,U.J],styles:["mat-form-field[_ngcontent-%COMP%]{margin:.4em 0}mat-dialog-actions[_ngcontent-%COMP%]{padding:0 2em 2em 0}.no-spinners[_ngcontent-%COMP%]{-moz-appearance:textfield}.no-spinners[_ngcontent-%COMP%]::-webkit-outer-spin-button, .no-spinners[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}"]})}return g})()},713:(Z,f,e)=>{e.r(f),e.d(f,{EnrollmentsModule:()=>H});var o=e(6814),i=e(7501),u=e(5937),h=e(9591),r=e(8571),t=e(5879),a=e(7700),m=e(4221),C=e(2296),v=e(617),D=e(5940),P=e(3519),O=e.n(P),U=e(1476),p=e(5313),I=e(1064),x=e(3566),g=e(2596),y=e(9638);const d=["enrollmentsSort"];function T(n,c){1&n&&(t.TgZ(0,"th",14),t._uU(1," Course "),t.qZA())}function _(n,c){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&n){const s=c.$implicit;t.xp6(1),t.hij(" ",s.course.name.nameString," ")}}function M(n,c){1&n&&(t.TgZ(0,"th",14),t._uU(1," Teacher "),t.qZA())}function S(n,c){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&n){const s=c.$implicit;t.xp6(1),t.hij(" ",s.course.teacher.name," ")}}function B(n,c){1&n&&(t.TgZ(0,"th",14),t._uU(1," Student "),t.qZA())}function Y(n,c){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"fullname"),t.qZA()),2&n){const s=c.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,s.student.name,s.student.surname)," ")}}function R(n,c){1&n&&(t.TgZ(0,"th",14),t._uU(1," Starting date "),t.qZA())}function L(n,c){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const s=c.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,s.course.startDate,"yyyy/MM/dd")," ")}}function F(n,c){1&n&&(t.TgZ(0,"th",16),t._uU(1,"Actions"),t.qZA())}function N(n,c){if(1&n){const s=t.EpF();t.TgZ(0,"td",15)(1,"mat-icon",17),t.NdJ("click",function(){const A=t.CHM(s).$implicit,V=t.oxw();return t.KtG(V.deleteEnrollment(A.id))}),t._uU(2," delete "),t.qZA()()}}function W(n,c){1&n&&t._UZ(0,"tr",18)}function z(n,c){1&n&&t._UZ(0,"tr",19)}const b=function(){return[5,10,20]};let J=(()=>{class n{constructor(s){this.store=s,this.displayedColumns=["course","teacher","student","startDate","actions"],this.dataSource=new p.by,this.enrollments$=this.store.select(r.YD)}ngAfterViewInit(){this.initialize()}ngOnChanges(){this.initialize()}initialize(){this.enrollments$.subscribe(s=>{this.dataSource=new p.by(s),this.dataSource.paginator=this.paginator,this.dataSource.sortingDataAccessor=(l,E)=>{switch(E){case"course":return l.course?.name?.nameString||"";case"teacher":return l.course?.teacher?.name||"";case"student":return l.student?.name||"";case"startDate":return l.course?.startDate?.toString()||0;default:return""}},this.dataSource.sort=this.enrollmentsSort})}deleteEnrollment(s){O().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",heightAuto:!1}).then(l=>{l.isConfirmed&&(this.store.dispatch(h.c.deleteEnrollment({id:s,source:"",sourceId:""})),this.enrollments$=this.store.select(r.YD)),O().fire({title:"Deleted!",icon:"success",confirmButtonText:"OK",heightAuto:!1,timer:1500,timerProgressBar:!0})})}static#t=this.\u0275fac=function(l){return new(l||n)(t.Y36(m.yh))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-enrollments-table"]],viewQuery:function(l,E){if(1&l&&(t.Gf(U.NW,5),t.Gf(d,5)),2&l){let A;t.iGM(A=t.CRH())&&(E.paginator=A.first),t.iGM(A=t.CRH())&&(E.enrollmentsSort=A.first)}},features:[t.TTD],decls:21,vars:5,consts:[["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["enrollmentsSort","matSort"],["matColumnDef","course"],["appFontSize","","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","teacher"],["matColumnDef","student"],["matColumnDef","startDate"],["matColumnDef","actions"],["appFontSize","","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["color","accent",3,"pageSizeOptions"],["paginator",""],["appFontSize","","mat-header-cell","","mat-sort-header",""],["mat-cell",""],["appFontSize","","mat-header-cell",""],["matTooltip","Delete","matTooltipPosition","after",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(l,E){1&l&&(t.TgZ(0,"table",0,1),t.ynx(2,2),t.YNc(3,T,2,0,"th",3),t.YNc(4,_,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,M,2,0,"th",3),t.YNc(7,S,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,B,2,0,"th",3),t.YNc(10,Y,3,4,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,R,2,0,"th",3),t.YNc(13,L,3,4,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,F,2,0,"th",9),t.YNc(16,N,3,0,"td",4),t.BQk(),t.YNc(17,W,1,0,"tr",10),t.YNc(18,z,1,0,"tr",11),t.qZA(),t._UZ(19,"mat-paginator",12,13)),2&l&&(t.Q6J("dataSource",E.dataSource),t.xp6(17),t.Q6J("matHeaderRowDef",E.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",E.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(4,b)))},dependencies:[v.Hw,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,I.h,U.NW,x.YE,x.nU,g.gM,o.uU,y.J]})}return n})();function K(n,c){1&n&&(t.TgZ(0,"div",4),t._UZ(1,"mat-spinner",5),t.qZA())}function Q(n,c){1&n&&t._UZ(0,"app-enrollments-table")}const $=[{path:"",component:(()=>{class n{constructor(s,l){this.dialog=s,this.store=l,this.store.dispatch(h.c.loadEnrollments()),this.isLoading$=this.store.select(r.B1),this.enrollments$=this.store.select(r.YD)}onNewEnrollment(){this.dialog.open(u.L).afterClosed().subscribe()}static#t=this.\u0275fac=function(l){return new(l||n)(t.Y36(a.uw),t.Y36(m.yh))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-enrollments"]],decls:11,vars:4,consts:[[1,"container"],["mat-flat-button","","color","accent",3,"click"],["class","loading",4,"ngIf","ngIfElse"],["table",""],[1,"loading"],["color","accent"]],template:function(l,E){if(1&l&&(t.TgZ(0,"div",0)(1,"p"),t._uU(2,"ENROLLMENTS"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return E.onNewEnrollment()}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA(),t._uU(6," Create enrollment "),t.qZA()(),t.YNc(7,K,2,0,"div",2),t.ALo(8,"async"),t.YNc(9,Q,1,0,"ng-template",null,3,t.W1O)),2&l){const A=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,E.isLoading$))("ngIfElse",A)}},dependencies:[o.O5,C.lW,v.Hw,D.Ou,J,o.Ov],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:1em 0}button[_ngcontent-%COMP%]{margin-right:1.5em;margin-bottom:.5em}p[_ngcontent-%COMP%]{font-size:2.5em;text-shadow:5px -5px .3em black,5px 5px .3em black,-5px 5px .3em black,-5px -5px .3em black}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;height:100%}"]})}return n})()}];let j=(()=>{class n{static#t=this.\u0275fac=function(l){return new(l||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[i.Bz.forChild($),i.Bz]})}return n})();var w=e(6208);let H=(()=>{class n{static#t=this.\u0275fac=function(l){return new(l||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[o.ez,j,w.m]})}return n})()},8571:(Z,f,e)=>{e.d(f,{B1:()=>r,U8:()=>t,YD:()=>h,qc:()=>a});var o=e(4221),i=e(5082);const u=(0,o.ZF)(i.YN),h=(0,o.P1)(u,m=>m.enrollments),r=(0,o.P1)(u,m=>m.isLoading),t=(0,o.P1)(u,m=>m.courses),a=(0,o.P1)(u,m=>m.students)},1064:(Z,f,e)=>{e.d(f,{h:()=>i});var o=e(5879);let i=(()=>{class u{constructor(r,t){this.elementRef=r,this.renderer=t,this.size="20px",this.setStyle()}ngOnChanges(r){this.size=r.size?.currentValue,this.setStyle()}setStyle(){this.renderer.setStyle(this.elementRef.nativeElement,"fontSize",this.size),this.renderer.setStyle(this.elementRef.nativeElement,"textDecoration","underline"),this.renderer.setStyle(this.elementRef.nativeElement,"fontWeight","bolder")}static#t=this.\u0275fac=function(t){return new(t||u)(o.Y36(o.SBq),o.Y36(o.Qsj))};static#e=this.\u0275dir=o.lG2({type:u,selectors:[["","appFontSize",""]],inputs:{size:"size"},features:[o.TTD]})}return u})()},9638:(Z,f,e)=>{e.d(f,{J:()=>u});var o=e(5879),i=e(6814);let u=(()=>{class h{constructor(t){this.titlecasePipe=t}transform(t,a){return`${this.titlecasePipe.transform(t)} ${this.titlecasePipe.transform(a)}`}static#t=this.\u0275fac=function(a){return new(a||h)(o.Y36(i.rS,16))};static#e=this.\u0275pipe=o.Yjl({name:"fullname",type:h,pure:!0})}return h})()},1630:(Z,f,e)=>{e.d(f,{x0:()=>h});let h=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((t,a)=>t+((a&=63)<36?a.toString(36):a<62?(a-26).toString(36).toUpperCase():a>62?"-":"_"),"")}}]);